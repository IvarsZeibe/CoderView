<div class="heading">
    <h1>Discussions</h1>
    <button mat-raised-button color="accent" [routerLink]="['/new_post']">Start a discussion</button>
</div>
<mat-form-field class="search-bar">
    <input [(ngModel)]="titleSearchFilter" matInput placeholder="Search discussion">
    <button mat-button matSuffix (click)="filterPosts($event)">Search</button>
</mat-form-field>
<div>
    <mat-card class="card" *ngFor="let post of posts" [routerLink]="['/post', post.id]">
        <mat-card-header>
            <mat-card-title>{{post.title}}</mat-card-title>
            <mat-card-subtitle>{{post.author}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p>{{post.content}}</p>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button>Comment ({{post.commentCount}})</button>
            <button mat-button [class.button-pressed]="post.isVotedByUser" (click)="voteOnPost($event, post)">Vote ({{post.voteCount}})</button>
        </mat-card-actions>
    </mat-card>
    <mat-progress-bar color="accent" [style.visibility]="isTryingToLoadPosts ? 'visible' : 'hidden'" mode="indeterminate"></mat-progress-bar>
</div>
